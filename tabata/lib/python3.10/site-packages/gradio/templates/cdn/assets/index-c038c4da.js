import{S as ue,e as oe,s as ie,f as re,g as d,h as T,j as G,n as y,k as B,F as D,o as W,P as de,G as A,r as ee,u as p,v as te,w as k,H as E,C as we,E as q,m as V,X as J,Y as U,p as Y,ak as C,V as Tt,ae as Bt,Q as St,R as Dt,N as H,I as tt,y as Ke,ar as At,Z as Ft,D as Et,a4 as Ie,ai as Nt,ao as it,K as st,q as Wt,B as Rt,ap as Xe,aw as Pt,O as K,T as Q,a9 as Xt,ab as Ot,ac as Yt,ad as yt}from"./index-9e76ffee.js";import{u as Vt,S as Zt}from"./ShareButton-40f28ee7.js";import{B as Lt,f as nt}from"./Button-30a08c0b.js";import{B as jt}from"./BlockLabel-9545c6da.js";import{I as Be}from"./IconButton-307018b3.js";import{E as Gt}from"./Empty-8e3485c0.js";import{D as Jt}from"./Download-e6704cf2.js";import{I as Oe}from"./Image-953318a0.js";import{C as Kt,i as Qt,U as $t,W as xt}from"./Image.svelte_svelte_type_style_lang-11edea9c.js";import{C as ei,M as Ye}from"./ModifyUpload-0461fcb6.js";import{U as ti}from"./Upload-1e84df2f.js";import{U as ii}from"./UploadText-426a6b47.js";import{E as Cs}from"./Image-39fd5447.js";import"./ModifyUpload.svelte_svelte_type_style_lang-14b768c9.js";function si(t){let e,i,s;return{c(){e=re("svg"),i=re("path"),s=re("path"),d(i,"d","M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z"),d(i,"fill","currentColor"),d(s,"d","M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z"),d(s,"fill","currentColor"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 32 32")},m(r,a){T(r,e,a),G(e,i),G(e,s)},p:y,i:y,o:y,d(r){r&&B(e)}}}class ni extends ue{constructor(e){super(),oe(this,e,null,si,ie,{})}}function li(t){let e,i,s,r,a,l,u;return{c(){e=re("svg"),i=re("circle"),s=re("circle"),r=re("circle"),a=re("circle"),l=re("circle"),u=re("path"),d(i,"cx","10"),d(i,"cy","12"),d(i,"r","2"),d(i,"fill","currentColor"),d(s,"cx","16"),d(s,"cy","9"),d(s,"r","2"),d(s,"fill","currentColor"),d(r,"cx","22"),d(r,"cy","12"),d(r,"r","2"),d(r,"fill","currentColor"),d(a,"cx","23"),d(a,"cy","18"),d(a,"r","2"),d(a,"fill","currentColor"),d(l,"cx","19"),d(l,"cy","23"),d(l,"r","2"),d(l,"fill","currentColor"),d(u,"fill","currentColor"),d(u,"d","M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 32 32")},m(n,o){T(n,e,o),G(e,i),G(e,s),G(e,r),G(e,a),G(e,l),G(e,u)},p:y,i:y,o:y,d(n){n&&B(e)}}}class ri extends ue{constructor(e){super(),oe(this,e,null,li,ie,{})}}function ai(t){let e,i;return{c(){e=re("svg"),i=re("path"),d(i,"fill","currentColor"),d(i,"d","M7 27h23v2H7zm20.38-16.49l-7.93-7.92a2 2 0 0 0-2.83 0l-14 14a2 2 0 0 0 0 2.83L7.13 24h9.59l10.66-10.66a2 2 0 0 0 0-2.83zM15.89 22H8l-4-4l6.31-6.31l7.93 7.92zm3.76-3.76l-7.92-7.93L18 4l8 7.93z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 32 32")},m(s,r){T(s,e,r),G(e,i)},p:y,i:y,o:y,d(s){s&&B(e)}}}class ui extends ue{constructor(e){super(),oe(this,e,null,ai,ie,{})}}function oi(t){let e,i;return{c(){e=re("svg"),i=re("path"),d(i,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-edit-2")},m(s,r){T(s,e,r),G(e,i)},p:y,i:y,o:y,d(s){s&&B(e)}}}let lt=class extends ue{constructor(e){super(),oe(this,e,null,oi,ie,{})}};const qt=t=>{let e=t.currentTarget;const i=e.getBoundingClientRect(),s=e.naturalWidth/i.width,r=e.naturalHeight/i.height;if(s>r){const u=e.naturalHeight/s,n=(i.height-u)/2;var a=Math.round((t.clientX-i.left)*s),l=Math.round((t.clientY-i.top-n)*s)}else{const u=e.naturalWidth/r,n=(i.width-u)/2;var a=Math.round((t.clientX-i.left-n)*r),l=Math.round((t.clientY-i.top)*r)}return a<0||a>=e.naturalWidth||l<0||l>=e.naturalHeight?null:[a,l]};function _i(t){let e,i,s,r,a,l,u,n,o=t[3]&&rt(t),_=t[5]&&at(t);return{c(){e=V("div"),o&&o.c(),i=W(),_&&_.c(),s=W(),r=V("img"),d(e,"class","icon-buttons svelte-1btp92j"),J(r.src,a=t[0])||d(r,"src",a),d(r,"alt",""),d(r,"class","svelte-1btp92j"),U(r,"selectable",t[4])},m(m,h){T(m,e,h),o&&o.m(e,null),G(e,i),_&&_.m(e,null),T(m,s,h),T(m,r,h),l=!0,u||(n=Y(r,"click",t[6]),u=!0)},p(m,h){m[3]?o?(o.p(m,h),h&8&&k(o,1)):(o=rt(m),o.c(),k(o,1),o.m(e,i)):o&&(ee(),p(o,1,1,()=>{o=null}),te()),m[5]?_?(_.p(m,h),h&32&&k(_,1)):(_=at(m),_.c(),k(_,1),_.m(e,null)):_&&(ee(),p(_,1,1,()=>{_=null}),te()),(!l||h&1&&!J(r.src,a=m[0]))&&d(r,"src",a),(!l||h&16)&&U(r,"selectable",m[4])},i(m){l||(k(o),k(_),l=!0)},o(m){p(o),p(_),l=!1},d(m){m&&(B(e),B(s),B(r)),o&&o.d(),_&&_.d(),u=!1,n()}}}function fi(t){let e,i;return e=new Gt({props:{unpadded_box:!0,size:"large",$$slots:{default:[hi]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(s,r){A(e,s,r),i=!0},p(s,r){const a={};r&2048&&(a.$$scope={dirty:r,ctx:s}),e.$set(a)},i(s){i||(k(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){E(e,s)}}}function rt(t){let e,i,s;return i=new Be({props:{Icon:Jt,label:"Download"}}),{c(){e=V("a"),D(i.$$.fragment),d(e,"href",t[0]),d(e,"target",window.__is_colab__?"_blank":null),d(e,"download","image")},m(r,a){T(r,e,a),A(i,e,null),s=!0},p(r,a){(!s||a&1)&&d(e,"href",r[0])},i(r){s||(k(i.$$.fragment,r),s=!0)},o(r){p(i.$$.fragment,r),s=!1},d(r){r&&B(e),E(i)}}}function at(t){let e,i;return e=new Zt({props:{formatter:t[7],value:t[0]}}),e.$on("share",t[8]),e.$on("error",t[9]),{c(){D(e.$$.fragment)},m(s,r){A(e,s,r),i=!0},p(s,r){const a={};r&1&&(a.value=s[0]),e.$set(a)},i(s){i||(k(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){E(e,s)}}}function hi(t){let e,i;return e=new Oe({}),{c(){D(e.$$.fragment)},m(s,r){A(e,s,r),i=!0},i(s){i||(k(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){E(e,s)}}}function ci(t){let e,i,s,r,a,l;e=new jt({props:{show_label:t[2],Icon:Oe,label:t[1]||"Image"}});const u=[fi,_i],n=[];function o(_,m){return _[0]===null?0:1}return s=o(t),r=n[s]=u[s](t),{c(){D(e.$$.fragment),i=W(),r.c(),a=de()},m(_,m){A(e,_,m),T(_,i,m),n[s].m(_,m),T(_,a,m),l=!0},p(_,[m]){const h={};m&4&&(h.show_label=_[2]),m&2&&(h.label=_[1]||"Image"),e.$set(h);let f=s;s=o(_),s===f?n[s].p(_,m):(ee(),p(n[f],1,1,()=>{n[f]=null}),te(),r=n[s],r?r.p(_,m):(r=n[s]=u[s](_),r.c()),k(r,1),r.m(a.parentNode,a))},i(_){l||(k(e.$$.fragment,_),k(r),l=!0)},o(_){p(e.$$.fragment,_),p(r),l=!1},d(_){_&&(B(i),B(a)),E(e,_),n[s].d(_)}}}function mi(t,e,i){let{value:s}=e,{label:r=void 0}=e,{show_label:a}=e,{show_download_button:l=!0}=e,{selectable:u=!1}=e,{show_share_button:n=!1}=e;const o=we(),_=b=>{let v=qt(b);v&&o("select",{index:v,value:null})},m=async b=>b?`<img src="${await Vt(b,"base64")}" />`:"";function h(b){q.call(this,t,b)}function f(b){q.call(this,t,b)}return t.$$set=b=>{"value"in b&&i(0,s=b.value),"label"in b&&i(1,r=b.label),"show_label"in b&&i(2,a=b.show_label),"show_download_button"in b&&i(3,l=b.show_download_button),"selectable"in b&&i(4,u=b.selectable),"show_share_button"in b&&i(5,n=b.show_share_button)},t.$$.update=()=>{t.$$.dirty&1&&s&&o("change",s)},[s,r,a,l,u,n,_,m,h,f]}class gi extends ue{constructor(e){super(),oe(this,e,mi,ci,ie,{value:0,label:1,show_label:2,show_download_button:3,selectable:4,show_share_button:5})}}function bi(t){let e,i,s,r;const a=[t[13]];let l={};for(let u=0;u<a.length;u+=1)l=Tt(l,a[u]);return e=new Bt({props:l}),s=new gi({props:{value:t[0],label:t[4],show_label:t[5],show_download_button:t[6],selectable:t[9],show_share_button:t[14]}}),s.$on("select",t[16]),s.$on("share",t[17]),s.$on("error",t[18]),{c(){D(e.$$.fragment),i=W(),D(s.$$.fragment)},m(u,n){A(e,u,n),T(u,i,n),A(s,u,n),r=!0},p(u,n){const o=n&8192?St(a,[Dt(u[13])]):{};e.$set(o);const _={};n&1&&(_.value=u[0]),n&16&&(_.label=u[4]),n&32&&(_.show_label=u[5]),n&64&&(_.show_download_button=u[6]),n&512&&(_.selectable=u[9]),n&16384&&(_.show_share_button=u[14]),s.$set(_)},i(u){r||(k(e.$$.fragment,u),k(s.$$.fragment,u),r=!0)},o(u){p(e.$$.fragment,u),p(s.$$.fragment,u),r=!1},d(u){u&&B(i),E(e,u),E(s,u)}}}function di(t){let e,i;return e=new Lt({props:{visible:t[3],variant:"solid",border_mode:t[15]?"focus":"base",padding:!1,elem_id:t[1],elem_classes:t[2],height:t[7]||void 0,width:t[8],allow_overflow:!1,container:t[10],scale:t[11],min_width:t[12],$$slots:{default:[bi]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(s,r){A(e,s,r),i=!0},p(s,[r]){const a={};r&8&&(a.visible=s[3]),r&2&&(a.elem_id=s[1]),r&4&&(a.elem_classes=s[2]),r&128&&(a.height=s[7]||void 0),r&256&&(a.width=s[8]),r&1024&&(a.container=s[10]),r&2048&&(a.scale=s[11]),r&4096&&(a.min_width=s[12]),r&1073777&&(a.$$scope={dirty:r,ctx:s}),e.$set(a)},i(s){i||(k(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){E(e,s)}}}function wi(t,e,i){let{elem_id:s=""}=e,{elem_classes:r=[]}=e,{visible:a=!0}=e,{value:l=null}=e,{label:u}=e,{show_label:n}=e,{show_download_button:o}=e,{height:_}=e,{width:m}=e,{selectable:h=!1}=e,{container:f=!0}=e,{scale:b=null}=e,{min_width:v=void 0}=e,{loading_status:R}=e,{show_share_button:$=!1}=e;const N=we();let P;function _e(M){q.call(this,t,M)}function L(M){q.call(this,t,M)}function z(M){q.call(this,t,M)}return t.$$set=M=>{"elem_id"in M&&i(1,s=M.elem_id),"elem_classes"in M&&i(2,r=M.elem_classes),"visible"in M&&i(3,a=M.visible),"value"in M&&i(0,l=M.value),"label"in M&&i(4,u=M.label),"show_label"in M&&i(5,n=M.show_label),"show_download_button"in M&&i(6,o=M.show_download_button),"height"in M&&i(7,_=M.height),"width"in M&&i(8,m=M.width),"selectable"in M&&i(9,h=M.selectable),"container"in M&&i(10,f=M.container),"scale"in M&&i(11,b=M.scale),"min_width"in M&&i(12,v=M.min_width),"loading_status"in M&&i(13,R=M.loading_status),"show_share_button"in M&&i(14,$=M.show_share_button)},t.$$.update=()=>{t.$$.dirty&1&&i(0,l=l||null),t.$$.dirty&1&&N("change")},[l,s,r,a,u,n,o,_,m,h,f,b,v,R,$,P,_e,L,z]}class ki extends ue{constructor(e){super(),oe(this,e,wi,di,ie,{elem_id:1,elem_classes:2,visible:3,value:0,label:4,show_label:5,show_download_button:6,height:7,width:8,selectable:9,container:10,scale:11,min_width:12,loading_status:13,show_share_button:14})}get elem_id(){return this.$$.ctx[1]}set elem_id(e){this.$$set({elem_id:e}),C()}get elem_classes(){return this.$$.ctx[2]}set elem_classes(e){this.$$set({elem_classes:e}),C()}get visible(){return this.$$.ctx[3]}set visible(e){this.$$set({visible:e}),C()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),C()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),C()}get show_label(){return this.$$.ctx[5]}set show_label(e){this.$$set({show_label:e}),C()}get show_download_button(){return this.$$.ctx[6]}set show_download_button(e){this.$$set({show_download_button:e}),C()}get height(){return this.$$.ctx[7]}set height(e){this.$$set({height:e}),C()}get width(){return this.$$.ctx[8]}set width(e){this.$$set({width:e}),C()}get selectable(){return this.$$.ctx[9]}set selectable(e){this.$$set({selectable:e}),C()}get container(){return this.$$.ctx[10]}set container(e){this.$$set({container:e}),C()}get scale(){return this.$$.ctx[11]}set scale(e){this.$$set({scale:e}),C()}get min_width(){return this.$$.ctx[12]}set min_width(e){this.$$set({min_width:e}),C()}get loading_status(){return this.$$.ctx[13]}set loading_status(e){this.$$set({loading_status:e}),C()}get show_share_button(){return this.$$.ctx[14]}set show_share_button(e){this.$$set({show_share_button:e}),C()}}function vi(t){let e,i;return{c(){e=V("img"),J(e.src,i=t[0])||d(e,"src",i),d(e,"alt","")},m(s,r){T(s,e,r),t[4](e)},p(s,[r]){r&1&&!J(e.src,i=s[0])&&d(e,"src",i)},i:y,o:y,d(s){s&&B(e),t[4](null)}}}function Ii(t,e,i){let{image:s}=e,r;const a=we();let l;function u(){l.destroy()}function n(){l&&u(),l=new Kt(r,{autoCropArea:1,cropend(){const _=l.getCroppedCanvas().toDataURL();a("crop",_)}}),a("crop",s)}function o(_){H[_?"unshift":"push"](()=>{r=_,i(1,r)})}return t.$$set=_=>{"image"in _&&i(0,s=_.image)},[s,r,u,n,o]}class Ht extends ue{constructor(e){super(),oe(this,e,Ii,vi,ie,{image:0,destroy:2,create:3})}get image(){return this.$$.ctx[0]}set image(e){this.$$set({image:e}),C()}get destroy(){return this.$$.ctx[2]}get create(){return this.$$.ctx[3]}}class ut{constructor(e,i){this.x=e,this.y=i}}class ot extends ut{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,i){const s=e+Math.PI/2;this.x=this.x+Math.sin(s)*i,this.y=this.y-Math.cos(s)*i}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new ut(this.x-e.x,this.y-e.y)}getDistanceTo(e){const i=this.getDifferenceTo(e);return Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}getAngleTo(e){const i=this.getDifferenceTo(e);return Math.atan2(i.y,i.x)}toObject(){return{x:this.x,y:this.y}}}const pi=30;class Ci{constructor({radius:e=pi,enabled:i=!0,initialPoint:s={x:0,y:0}}={}){this.radius=e,this._isEnabled=i,this.pointer=new ot(s.x,s.y),this.brush=new ot(s.x,s.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:i=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!i?!1:(this.pointer.update(e),i?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function _t(t,e,i){const s=t.slice();return s[61]=e[i].name,s[62]=e[i].zIndex,s[63]=e[i].opacity,s[64]=e,s[65]=i,s}function ft(t){let e,i,s;return{c(){e=V("div"),e.textContent="Start drawing",d(e,"class","start-prompt svelte-yigbas")},m(r,a){T(r,e,a),s=!0},i(r){s||(r&&Ke(()=>{s&&(i||(i=it(e,nt,{duration:50},!0)),i.run(1))}),s=!0)},o(r){r&&(i||(i=it(e,nt,{duration:50},!1)),i.run(0)),s=!1},d(r){r&&B(e),r&&i&&i.end()}}}function ht(t){let e,i=t[61],s,r;const a=()=>t[31](e,i),l=()=>t[31](null,i);return{c(){e=V("canvas"),d(e,"key",t[61]),st(e,"z-index",t[62]),d(e,"class","svelte-yigbas"),U(e,"lr",t[5]),U(e,"tb",!t[5]),st(e,"opacity",t[63])},m(u,n){T(u,e,n),a(),s||(r=[Y(e,"mousedown",t[61]==="interface"?t[7]:void 0),Y(e,"mousemove",t[61]==="interface"?t[8]:void 0),Y(e,"mouseup",t[61]==="interface"?t[9]:void 0),Y(e,"mouseout",t[61]==="interface"?t[9]:void 0),Y(e,"blur",t[61]==="interface"?t[9]:void 0),Y(e,"touchstart",t[61]==="interface"?t[7]:void 0),Y(e,"touchmove",t[61]==="interface"?t[8]:void 0),Y(e,"touchend",t[61]==="interface"?t[9]:void 0),Y(e,"touchcancel",t[61]==="interface"?t[9]:void 0),Y(e,"click",Wt(t[30]))],s=!0)},p(u,n){t=u,i!==t[61]&&(l(),i=t[61],a()),n[0]&32&&U(e,"lr",t[5]),n[0]&32&&U(e,"tb",!t[5])},d(u){u&&B(e),l(),s=!1,Rt(r)}}}function Mi(t){let e,i,s,r=t[4]===0&&ft(),a=tt(t[6]),l=[];for(let u=0;u<a.length;u+=1)l[u]=ht(_t(t,a,u));return{c(){e=V("div"),r&&r.c(),i=W();for(let u=0;u<l.length;u+=1)l[u].c();d(e,"class","wrap svelte-yigbas"),Ke(()=>t[33].call(e))},m(u,n){T(u,e,n),r&&r.m(e,null),G(e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t[32](e),s=At(e,t[33].bind(e))},p(u,n){if(u[4]===0?r?n[0]&16&&k(r,1):(r=ft(),r.c(),k(r,1),r.m(e,i)):r&&(ee(),p(r,1,1,()=>{r=null}),te()),n[0]&993){a=tt(u[6]);let o;for(o=0;o<a.length;o+=1){const _=_t(u,a,o);l[o]?l[o].p(_,n):(l[o]=ht(_),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}},i(u){k(r)},o(u){p(r)},d(u){u&&B(e),r&&r.d(),Ft(l,u),t[32](null),s()}}}let zi="#aaa";function Ti(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}}function Bi(t,e,i){let s;const r=we();let{value:a}=e,{value_img:l}=e,{mode:u="sketch"}=e,{brush_color:n="#0b0f19"}=e,{brush_radius:o}=e,{mask_opacity:_=.7}=e,{source:m}=e,{width:h=400}=e,{height:f=200}=e,{container_height:b=200}=e,{shape:v}=e,R,$=h,N=f,P;const _e=[{name:"interface",zIndex:15},{name:"mask",zIndex:13,opacity:_},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let L={},z={},M=[],F=[],se=!0,fe=!0,ce=!1,me=!1,O=null,ne=null,le=null,x=0;function he(){if(!v){z.temp.drawImage(l,0,0,h,f);return}let g=l.naturalWidth,S=l.naturalHeight;const j=v[0]/v[1],Z=g/S;let c=0,X=0;j<Z?(g=v[1]*Z,S=v[1],c=(v[0]-g)/2):j>Z?(g=v[0],S=v[0]/Z,X=(v[1]-S)/2):(c=0,X=0,g=v[0],S=v[1]),z.temp.drawImage(l,c,X,g,S)}Et(async()=>{Object.keys(L).forEach(g=>{i(27,z[g]=L[g].getContext("2d"),z)}),await Ie(),l&&(l.addEventListener("load",g=>{m==="webcam"?(z.temp.save(),z.temp.translate(h,0),z.temp.scale(-1,1),z.temp.drawImage(l,0,0),z.temp.restore()):he(),z.drawing.drawImage(L.temp,0,0,h,f),be()}),setTimeout(()=>{m==="webcam"?(z.temp.save(),z.temp.translate(h,0),z.temp.scale(-1,1),z.temp.drawImage(l,0,0),z.temp.restore()):he(),z.drawing.drawImage(L.temp,0,0,h,f),ke({lines:F.slice()}),be()},100)),i(29,O=new Ci({radius:o*.05,enabled:!0,initialPoint:{x:h/2,y:f/2}})),le=new Qt((g,S,...j)=>{Re()}),le.observe(ne),Ee(),i(25,R=!0),requestAnimationFrame(()=>{ge(),requestAnimationFrame(()=>{ve()})})});function ge(){const g=h/2,S=f/2;O.update({x:g,y:S},{both:!0}),O.update({x:g,y:S},{both:!1}),se=!0,fe=!0}Nt(()=>{i(25,R=!1),le.unobserve(ne)});function ae(g){Fe(),l&&(m==="webcam"?(z.temp.save(),z.temp.translate(h,0),z.temp.scale(-1,1),z.temp.drawImage(l,0,0),z.temp.restore()):he(),(!F||!F.length)&&z.drawing.drawImage(L.temp,0,0,h,f)),ke({lines:g}),i(4,x=g.length),i(28,F=g),z.drawing.drawImage(L.temp,0,0,h,f),F.length==0&&r("clear")}function I(){ae([]),be()}function Se(){const g=F.slice(0,-1);ae(g),be()}let ke=({lines:g})=>{g.forEach(S=>{const{points:j,brush_color:Z,brush_radius:c}=S;qe({points:j,brush_color:Z,brush_radius:c,mask:u==="mask"})}),Ue(),u==="mask"&&He()},De=g=>{g.preventDefault(),me=!0;const{x:S,y:j}=Le(g);g.touches&&g.touches.length>0&&O.update({x:S,y:j},{both:!0}),je(S,j),i(4,x+=1)},pe=g=>{g.preventDefault();const{x:S,y:j}=Le(g);je(S,j)},Ae=g=>{g.preventDefault(),pe(g),ce=!1,me=!1,Ue(),u==="mask"&&He()},Ce=0,Me=0,ze=0,w=!1,Re=async()=>{if(v&&ne){const j=ne?.getBoundingClientRect(),Z=v[0]/v[1],c=j.width/j.height;i(5,w=Z<c)}if(h===Ce&&f===Me&&ze===b)return;const g={width:h,height:f},S={height:b,width:b*(g.width/g.height)};await Promise.all([Te(L.interface,g,S),Te(L.drawing,g,S),Te(L.temp,g,S),Te(L.mask,g,S,!1)]),o||i(10,o=20*(g.width/S.width)),Ee({once:!0}),setTimeout(()=>{Me=f,Ce=h,ze=b},10),await Ie(),ve()},Te=async(g,S,j,Z=!0)=>{if(!R)return;await Ie();const c=window.devicePixelRatio||1;g.width=S.width*(Z?c:1),g.height=S.height*(Z?c:1);const X=g.getContext("2d");Z&&X.scale(c,c),g.style.width=`${j.width}px`,g.style.height=`${j.height}px`},Le=g=>{const S=L.interface.getBoundingClientRect();let j=g.clientX,Z=g.clientY;return g.changedTouches&&g.changedTouches.length>0&&(j=g.changedTouches[0].clientX,Z=g.changedTouches[0].clientY),{x:(j-S.left)/S.width*h,y:(Z-S.top)/S.height*f}},je=(g,S)=>{O.update({x:g,y:S});const j=!O.isEnabled();(me&&!ce||j&&me)&&(ce=!0,M.push(O.brush.toObject())),ce&&(M.push(O.brush.toObject()),qe({points:M,brush_color:n,brush_radius:o,mask:u==="mask"})),se=!0},qe=({points:g,brush_color:S,brush_radius:j,mask:Z})=>{if(!g||g.length<2)return;let c=Z?z.mask:z.temp;c.lineJoin="round",c.lineCap="round",c.strokeStyle=S,c.lineWidth=j;let X=g[0],We=g[1];c.moveTo(We.x,We.y),c.beginPath();for(var Pe=1,Ut=g.length;Pe<Ut;Pe++){var et=Ti(X,We);c.quadraticCurveTo(X.x,X.y,et.x,et.y),X=g[Pe],We=g[Pe+1]}c.lineTo(X.x,X.y),c.stroke()},He=()=>{M.length<1||(M.length=0,be())},Ue=()=>{M.length<1||(F.push({points:M.slice(),brush_color:n,brush_radius:o}),u!=="mask"&&(M.length=0),z.drawing.drawImage(L.temp,0,0,h,f),be())},be=()=>{const g=Ne();r("change",g)};function ve(){return i(28,F=[]),Fe(),i(4,x=0),!0}function Fe(){fe=!0,z.temp.clearRect(0,0,h,f),i(27,z.temp.fillStyle=u==="mask"?"transparent":"#FFFFFF",z),z.temp.fillRect(0,0,h,f),u==="mask"&&z.mask.clearRect(0,0,L.mask.width,L.mask.height)}let Ee=({once:g=!1}={})=>{if(se||fe){const S=O.getPointerCoordinates(),j=O.getBrushCoordinates();ye(z.interface,S,j),se=!1,fe=!1}g||window.requestAnimationFrame(()=>{Ee()})},ye=(g,S,j)=>{g.clearRect(0,0,h,f),g.beginPath(),g.fillStyle=n,g.arc(j.x,j.y,o/2,0,Math.PI*2,!0),g.fill(),g.beginPath(),g.fillStyle=zi,g.arc(j.x,j.y,s,0,Math.PI*2,!0),g.fill()};function Ne(){return u==="mask"?L.mask.toDataURL("image/png"):L.drawing.toDataURL("image/jpg")}function Ve(g){q.call(this,t,g)}function Ze(g,S){H[g?"unshift":"push"](()=>{L[S]=g,i(0,L)})}function Ge(g){H[g?"unshift":"push"](()=>{ne=g,i(3,ne)})}function Je(){$=this.offsetWidth,N=this.offsetHeight,i(1,$),i(2,N)}return t.$$set=g=>{"value"in g&&i(13,a=g.value),"value_img"in g&&i(14,l=g.value_img),"mode"in g&&i(15,u=g.mode),"brush_color"in g&&i(16,n=g.brush_color),"brush_radius"in g&&i(10,o=g.brush_radius),"mask_opacity"in g&&i(17,_=g.mask_opacity),"source"in g&&i(18,m=g.source),"width"in g&&i(11,h=g.width),"height"in g&&i(12,f=g.height),"container_height"in g&&i(19,b=g.container_height),"shape"in g&&i(20,v=g.shape)},t.$$.update=()=>{t.$$.dirty[0]&1054720&&v&&(h||f)&&(i(11,h=v[0]),i(12,f=v[1])),t.$$.dirty[0]&33562624&&R&&!a&&ve(),t.$$.dirty[0]&503601153&&R&&l!==P&&(i(26,P=l),ve(),setTimeout(()=>{m==="webcam"?(z.temp.save(),z.temp.translate(h,0),z.temp.scale(-1,1),z.temp.drawImage(l,0,0),z.temp.restore()):he(),z.drawing.drawImage(L.temp,0,0,h,f),ke({lines:F.slice()}),be()},50)),t.$$.dirty[0]&536871936&&O&&(ge(),O.setRadius(o*.05)),t.$$.dirty[0]&6144&&(h||f)&&Re(),t.$$.dirty[0]&1024&&(s=o*.075)},[L,$,N,ne,x,w,_e,De,pe,Ae,o,h,f,a,l,u,n,_,m,b,v,I,Se,ve,Ne,R,P,z,F,O,Ve,Ze,Ge,Je]}class Qe extends ue{constructor(e){super(),oe(this,e,Bi,Mi,ie,{value:13,value_img:14,mode:15,brush_color:16,brush_radius:10,mask_opacity:17,source:18,width:11,height:12,container_height:19,shape:20,clear_mask:21,undo:22,clear:23,get_image_data:24},null,[-1,-1,-1])}get clear_mask(){return this.$$.ctx[21]}get undo(){return this.$$.ctx[22]}get clear(){return this.$$.ctx[23]}get get_image_data(){return this.$$.ctx[24]}}function ct(t){let e,i;return e=new Be({props:{Icon:ui,label:"Clear"}}),e.$on("click",t[3]),{c(){D(e.$$.fragment)},m(s,r){A(e,s,r),i=!0},p:y,i(s){i||(k(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){E(e,s)}}}function Si(t){let e,i,s,r,a,l;i=new Be({props:{Icon:$t,label:"Undo"}}),i.$on("click",t[2]);let u=t[0]&&ct(t);return a=new Be({props:{Icon:ei,label:"Remove Image"}}),a.$on("click",t[4]),{c(){e=V("div"),D(i.$$.fragment),s=W(),u&&u.c(),r=W(),D(a.$$.fragment),d(e,"class","svelte-s6ybro")},m(n,o){T(n,e,o),A(i,e,null),G(e,s),u&&u.m(e,null),G(e,r),A(a,e,null),l=!0},p(n,[o]){n[0]?u?(u.p(n,o),o&1&&k(u,1)):(u=ct(n),u.c(),k(u,1),u.m(e,r)):u&&(ee(),p(u,1,1,()=>{u=null}),te())},i(n){l||(k(i.$$.fragment,n),k(u),k(a.$$.fragment,n),l=!0)},o(n){p(i.$$.fragment,n),p(u),p(a.$$.fragment,n),l=!1},d(n){n&&B(e),E(i),u&&u.d(),E(a)}}}function Di(t,e,i){const s=we();let{show_eraser:r=!1}=e;const a=()=>s("undo"),l=n=>{s("clear_mask"),n.stopPropagation()},u=n=>{s("remove_image"),n.stopPropagation()};return t.$$set=n=>{"show_eraser"in n&&i(0,r=n.show_eraser)},[r,s,a,l,u]}class $e extends ue{constructor(e){super(),oe(this,e,Di,Si,ie,{show_eraser:0})}}function mt(t){let e,i,s,r,a;return{c(){e=V("input"),d(e,"aria-label","Brush radius"),d(e,"type","range"),d(e,"min",i=.5*(t[2]/t[6])),d(e,"max",s=75*(t[2]/t[6])),d(e,"class","svelte-p4aq0j")},m(l,u){T(l,e,u),Xe(e,t[0]),r||(a=[Y(e,"change",t[10]),Y(e,"input",t[10])],r=!0)},p(l,u){u&68&&i!==(i=.5*(l[2]/l[6]))&&d(e,"min",i),u&68&&s!==(s=75*(l[2]/l[6]))&&d(e,"max",s),u&1&&Xe(e,l[0])},d(l){l&&B(e),r=!1,Rt(a)}}}function gt(t){let e,i,s,r;i=new Be({props:{Icon:ri,label:"Select brush color"}}),i.$on("click",t[11]);let a=t[5]&&bt(t);return{c(){e=V("span"),D(i.$$.fragment),s=W(),a&&a.c(),d(e,"class","col svelte-p4aq0j")},m(l,u){T(l,e,u),A(i,e,null),G(e,s),a&&a.m(e,null),r=!0},p(l,u){l[5]?a?a.p(l,u):(a=bt(l),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(l){r||(k(i.$$.fragment,l),r=!0)},o(l){p(i.$$.fragment,l),r=!1},d(l){l&&B(e),E(i),a&&a.d()}}}function bt(t){let e,i,s;return{c(){e=V("input"),d(e,"aria-label","Brush color"),d(e,"type","color"),d(e,"class","svelte-p4aq0j")},m(r,a){T(r,e,a),Xe(e,t[1]),i||(s=Y(e,"input",t[12]),i=!0)},p(r,a){a&2&&Xe(e,r[1])},d(r){r&&B(e),i=!1,s()}}}function Ai(t){let e,i,s,r,a,l;s=new Be({props:{Icon:ni,label:"Use brush"}}),s.$on("click",t[9]);let u=t[4]&&mt(t),n=t[3]!=="mask"&&gt(t);return{c(){e=V("div"),i=V("span"),D(s.$$.fragment),r=W(),u&&u.c(),a=W(),n&&n.c(),d(i,"class","brush svelte-p4aq0j"),d(e,"class","wrap svelte-p4aq0j")},m(o,_){T(o,e,_),G(e,i),A(s,i,null),G(i,r),u&&u.m(i,null),G(e,a),n&&n.m(e,null),l=!0},p(o,[_]){o[4]?u?u.p(o,_):(u=mt(o),u.c(),u.m(i,null)):u&&(u.d(1),u=null),o[3]!=="mask"?n?(n.p(o,_),_&8&&k(n,1)):(n=gt(o),n.c(),k(n,1),n.m(e,null)):n&&(ee(),p(n,1,1,()=>{n=null}),te())},i(o){l||(k(s.$$.fragment,o),k(n),l=!0)},o(o){p(s.$$.fragment,o),p(n),l=!1},d(o){o&&B(e),E(s),u&&u.d(),n&&n.d()}}}function Ei(t,e,i){let s,r=!1,a=!1,{brush_radius:l=20}=e,{brush_color:u="#000"}=e,{container_height:n}=e,{img_width:o}=e,{img_height:_}=e,{mode:m="other"}=e;const h=()=>i(4,r=!r);function f(){l=Pt(this.value),i(0,l)}const b=()=>i(5,a=!a);function v(){u=this.value,i(1,u)}return t.$$set=R=>{"brush_radius"in R&&i(0,l=R.brush_radius),"brush_color"in R&&i(1,u=R.brush_color),"container_height"in R&&i(7,n=R.container_height),"img_width"in R&&i(2,o=R.img_width),"img_height"in R&&i(8,_=R.img_height),"mode"in R&&i(3,m=R.mode)},t.$$.update=()=>{t.$$.dirty&388&&i(6,s=n*(o/_))},[l,u,o,m,r,a,s,n,_,h,f,b,v]}class xe extends ue{constructor(e){super(),oe(this,e,Ei,Ai,ie,{brush_radius:0,brush_color:1,container_height:7,img_width:2,img_height:8,mode:3})}}function Ri(t){let e,i,s,r;return{c(){e=V("img"),J(e.src,i=t[0].image||t[0])||d(e,"src",i),d(e,"alt",""),d(e,"class","svelte-p3y7hu"),U(e,"webcam",t[6]==="webcam"&&t[10]),U(e,"selectable",t[12])},m(a,l){T(a,e,l),s||(r=Y(e,"click",t[30]),s=!0)},p(a,l){l[0]&1&&!J(e.src,i=a[0].image||a[0])&&d(e,"src",i),l[0]&1088&&U(e,"webcam",a[6]==="webcam"&&a[10]),l[0]&4096&&U(e,"selectable",a[12])},i:y,o:y,d(a){a&&B(e),s=!1,r()}}}function Li(t){let e=t[23],i,s,r,a=dt(t),l=t[17]>0&&wt(t);return{c(){a.c(),i=W(),l&&l.c(),s=de()},m(u,n){a.m(u,n),T(u,i,n),l&&l.m(u,n),T(u,s,n),r=!0},p(u,n){n[0]&8388608&&ie(e,e=u[23])?(a.d(1),a=dt(u),a.c(),a.m(i.parentNode,i)):a.p(u,n),u[17]>0?l?(l.p(u,n),n[0]&131072&&k(l,1)):(l=wt(u),l.c(),k(l,1),l.m(s.parentNode,s)):l&&(ee(),p(l,1,1,()=>{l=null}),te())},i(u){r||(k(l),r=!0)},o(u){p(l),r=!1},d(u){u&&(B(i),B(s)),a.d(u),l&&l.d(u)}}}function ji(t){let e,i,s,r,a,l,u;return e=new Ye({props:{editable:!0}}),e.$on("edit",t[53]),e.$on("clear",t[25]),{c(){D(e.$$.fragment),i=W(),s=V("img"),J(s.src,r=t[0])||d(s,"src",r),d(s,"alt",""),d(s,"class","svelte-p3y7hu"),U(s,"selectable",t[12]),U(s,"webcam",t[6]==="webcam"&&t[10])},m(n,o){A(e,n,o),T(n,i,o),T(n,s,o),a=!0,l||(u=Y(s,"click",t[30]),l=!0)},p(n,o){(!a||o[0]&1&&!J(s.src,r=n[0]))&&d(s,"src",r),(!a||o[0]&4096)&&U(s,"selectable",n[12]),(!a||o[0]&1088)&&U(s,"webcam",n[6]==="webcam"&&n[10])},i(n){a||(k(e.$$.fragment,n),a=!0)},o(n){p(e.$$.fragment,n),a=!1},d(n){n&&(B(i),B(s)),E(e,n),l=!1,u()}}}function qi(t){let e,i,s,r,a={image:t[0]};return e=new Ht({props:a}),t[51](e),e.$on("crop",t[26]),s=new Ye({}),s.$on("clear",t[52]),{c(){D(e.$$.fragment),i=W(),D(s.$$.fragment)},m(l,u){A(e,l,u),T(l,i,u),A(s,l,u),r=!0},p(l,u){const n={};u[0]&1&&(n.image=l[0]),e.$set(n)},i(l){r||(k(e.$$.fragment,l),k(s.$$.fragment,l),r=!0)},o(l){p(e.$$.fragment,l),p(s.$$.fragment,l),r=!1},d(l){l&&B(i),t[51](null),E(e,l),E(s,l)}}}function Hi(t){let e,i,s=t[6]==="webcam"&&!t[23]&&vt(t);return{c(){s&&s.c(),e=de()},m(r,a){s&&s.m(r,a),T(r,e,a),i=!0},p(r,a){r[6]==="webcam"&&!r[23]?s?(s.p(r,a),a[0]&8388672&&k(s,1)):(s=vt(r),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(ee(),p(s,1,1,()=>{s=null}),te())},i(r){i||(k(s),i=!0)},o(r){p(s),i=!1},d(r){r&&B(e),s&&s.d(r)}}}function Ui(t){let e,i,s,r,a,l,u;e=new $e({}),e.$on("undo",t[43]),e.$on("remove_image",t[28]);let n=t[1]==="color-sketch"&&It(t);function o(h){t[46](h)}function _(h){t[47](h)}let m={value:t[0],mode:t[19],width:t[17]||t[22],height:t[16]||t[21],container_height:t[18]||t[21],shape:t[7]};return t[2]!==void 0&&(m.brush_radius=t[2]),t[3]!==void 0&&(m.brush_color=t[3]),r=new Qe({props:m}),H.push(()=>K(r,"brush_radius",o)),H.push(()=>K(r,"brush_color",_)),t[48](r),r.$on("change",t[26]),r.$on("clear",t[28]),{c(){D(e.$$.fragment),i=W(),n&&n.c(),s=W(),D(r.$$.fragment)},m(h,f){A(e,h,f),T(h,i,f),n&&n.m(h,f),T(h,s,f),A(r,h,f),u=!0},p(h,f){h[1]==="color-sketch"?n?(n.p(h,f),f[0]&2&&k(n,1)):(n=It(h),n.c(),k(n,1),n.m(s.parentNode,s)):n&&(ee(),p(n,1,1,()=>{n=null}),te());const b={};f[0]&1&&(b.value=h[0]),f[0]&524288&&(b.mode=h[19]),f[0]&4325376&&(b.width=h[17]||h[22]),f[0]&2162688&&(b.height=h[16]||h[21]),f[0]&2359296&&(b.container_height=h[18]||h[21]),f[0]&128&&(b.shape=h[7]),!a&&f[0]&4&&(a=!0,b.brush_radius=h[2],Q(()=>a=!1)),!l&&f[0]&8&&(l=!0,b.brush_color=h[3],Q(()=>l=!1)),r.$set(b)},i(h){u||(k(e.$$.fragment,h),k(n),k(r.$$.fragment,h),u=!0)},o(h){p(e.$$.fragment,h),p(n),p(r.$$.fragment,h),u=!1},d(h){h&&(B(i),B(s)),E(e,h),n&&n.d(h),t[48](null),E(r,h)}}}function Fi(t){let e,i,s;function r(l){t[42](l)}let a={filetype:"image/*",include_file_metadata:!1,disable_click:!!t[0],$$slots:{default:[Yi]},$$scope:{ctx:t}};return t[14]!==void 0&&(a.dragging=t[14]),e=new ti({props:a}),H.push(()=>K(e,"dragging",r)),e.$on("load",t[24]),{c(){D(e.$$.fragment)},m(l,u){A(e,l,u),s=!0},p(l,u){const n={};u[0]&1&&(n.disable_click=!!l[0]),u[0]&16760271|u[2]&1&&(n.$$scope={dirty:u,ctx:l}),!i&&u[0]&16384&&(i=!0,n.dragging=l[14],Q(()=>i=!1)),e.$set(n)},i(l){s||(k(e.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),s=!1},d(l){E(e,l)}}}function dt(t){let e,i,s,r;return{c(){e=V("img"),d(e,"class","absolute-img svelte-p3y7hu"),J(e.src,i=t[23]||t[0]?.image||t[0])||d(e,"src",i),d(e,"alt",""),U(e,"webcam",t[6]==="webcam"&&t[10])},m(a,l){T(a,e,l),t[54](e),s||(r=Y(e,"load",t[27]),s=!0)},p(a,l){l[0]&8388609&&!J(e.src,i=a[23]||a[0]?.image||a[0])&&d(e,"src",i),l[0]&1088&&U(e,"webcam",a[6]==="webcam"&&a[10])},d(a){a&&B(e),t[54](null),s=!1,r()}}}function wt(t){let e,i,s,r,a,l,u,n;function o(f){t[56](f)}function _(f){t[57](f)}let m={value:t[0],mode:t[19],width:t[17]||t[22],height:t[16]||t[21],container_height:t[18]||t[21],value_img:t[20],source:t[6]};t[2]!==void 0&&(m.brush_radius=t[2]),t[3]!==void 0&&(m.brush_color=t[3]),e=new Qe({props:m}),t[55](e),H.push(()=>K(e,"brush_radius",o)),H.push(()=>K(e,"brush_color",_)),e.$on("change",t[26]),a=new $e({}),a.$on("undo",t[58]),a.$on("remove_image",t[28]);let h=(t[1]==="color-sketch"||t[1]==="sketch")&&kt(t);return{c(){D(e.$$.fragment),r=W(),D(a.$$.fragment),l=W(),h&&h.c(),u=de()},m(f,b){A(e,f,b),T(f,r,b),A(a,f,b),T(f,l,b),h&&h.m(f,b),T(f,u,b),n=!0},p(f,b){const v={};b[0]&1&&(v.value=f[0]),b[0]&524288&&(v.mode=f[19]),b[0]&4325376&&(v.width=f[17]||f[22]),b[0]&2162688&&(v.height=f[16]||f[21]),b[0]&2359296&&(v.container_height=f[18]||f[21]),b[0]&1048576&&(v.value_img=f[20]),b[0]&64&&(v.source=f[6]),!i&&b[0]&4&&(i=!0,v.brush_radius=f[2],Q(()=>i=!1)),!s&&b[0]&8&&(s=!0,v.brush_color=f[3],Q(()=>s=!1)),e.$set(v),f[1]==="color-sketch"||f[1]==="sketch"?h?(h.p(f,b),b[0]&2&&k(h,1)):(h=kt(f),h.c(),k(h,1),h.m(u.parentNode,u)):h&&(ee(),p(h,1,1,()=>{h=null}),te())},i(f){n||(k(e.$$.fragment,f),k(a.$$.fragment,f),k(h),n=!0)},o(f){p(e.$$.fragment,f),p(a.$$.fragment,f),p(h),n=!1},d(f){f&&(B(r),B(l),B(u)),t[55](null),E(e,f),E(a,f),h&&h.d(f)}}}function kt(t){let e,i,s,r;function a(n){t[59](n)}function l(n){t[60](n)}let u={container_height:t[18]||t[21],img_width:t[17]||t[22],img_height:t[16]||t[21],mode:t[19]};return t[2]!==void 0&&(u.brush_radius=t[2]),t[3]!==void 0&&(u.brush_color=t[3]),e=new xe({props:u}),H.push(()=>K(e,"brush_radius",a)),H.push(()=>K(e,"brush_color",l)),{c(){D(e.$$.fragment)},m(n,o){A(e,n,o),r=!0},p(n,o){const _={};o[0]&2359296&&(_.container_height=n[18]||n[21]),o[0]&4325376&&(_.img_width=n[17]||n[22]),o[0]&2162688&&(_.img_height=n[16]||n[21]),o[0]&524288&&(_.mode=n[19]),!i&&o[0]&4&&(i=!0,_.brush_radius=n[2],Q(()=>i=!1)),!s&&o[0]&8&&(s=!0,_.brush_color=n[3],Q(()=>s=!1)),e.$set(_)},i(n){r||(k(e.$$.fragment,n),r=!0)},o(n){p(e.$$.fragment,n),r=!1},d(n){E(e,n)}}}function vt(t){let e,i;return e=new xt({props:{streaming:t[8],pending:t[9],mirror_webcam:t[10]}}),e.$on("capture",t[49]),e.$on("stream",t[26]),e.$on("error",t[50]),{c(){D(e.$$.fragment)},m(s,r){A(e,s,r),i=!0},p(s,r){const a={};r[0]&256&&(a.streaming=s[8]),r[0]&512&&(a.pending=s[9]),r[0]&1024&&(a.mirror_webcam=s[10]),e.$set(a)},i(s){i||(k(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){E(e,s)}}}function It(t){let e,i,s,r;function a(n){t[44](n)}function l(n){t[45](n)}let u={container_height:t[18]||t[21],img_width:t[17]||t[22],img_height:t[16]||t[21]};return t[2]!==void 0&&(u.brush_radius=t[2]),t[3]!==void 0&&(u.brush_color=t[3]),e=new xe({props:u}),H.push(()=>K(e,"brush_radius",a)),H.push(()=>K(e,"brush_color",l)),{c(){D(e.$$.fragment)},m(n,o){A(e,n,o),r=!0},p(n,o){const _={};o[0]&2359296&&(_.container_height=n[18]||n[21]),o[0]&4325376&&(_.img_width=n[17]||n[22]),o[0]&2162688&&(_.img_height=n[16]||n[21]),!i&&o[0]&4&&(i=!0,_.brush_radius=n[2],Q(()=>i=!1)),!s&&o[0]&8&&(s=!0,_.brush_color=n[3],Q(()=>s=!1)),e.$set(_)},i(n){r||(k(e.$$.fragment,n),r=!0)},o(n){p(e.$$.fragment,n),r=!1},d(n){E(e,n)}}}function Ni(t){let e,i,s,r;return{c(){e=V("img"),J(e.src,i=t[0].image||t[0])||d(e,"src",i),d(e,"alt","hello"),d(e,"class","svelte-p3y7hu"),U(e,"webcam",t[6]==="webcam"&&t[10]),U(e,"selectable",t[12])},m(a,l){T(a,e,l),s||(r=Y(e,"click",t[30]),s=!0)},p(a,l){l[0]&1&&!J(e.src,i=a[0].image||a[0])&&d(e,"src",i),l[0]&1088&&U(e,"webcam",a[6]==="webcam"&&a[10]),l[0]&4096&&U(e,"selectable",a[12])},i:y,o:y,d(a){a&&B(e),s=!1,r()}}}function Wi(t){let e=t[23],i,s,r,a=pt(t),l=t[17]>0&&Ct(t);return{c(){a.c(),i=W(),l&&l.c(),s=de()},m(u,n){a.m(u,n),T(u,i,n),l&&l.m(u,n),T(u,s,n),r=!0},p(u,n){n[0]&8388608&&ie(e,e=u[23])?(a.d(1),a=pt(u),a.c(),a.m(i.parentNode,i)):a.p(u,n),u[17]>0?l?(l.p(u,n),n[0]&131072&&k(l,1)):(l=Ct(u),l.c(),k(l,1),l.m(s.parentNode,s)):l&&(ee(),p(l,1,1,()=>{l=null}),te())},i(u){r||(k(l),r=!0)},o(u){p(l),r=!1},d(u){u&&(B(i),B(s)),a.d(u),l&&l.d(u)}}}function Pi(t){let e,i,s,r,a,l,u;return e=new Ye({props:{editable:!0}}),e.$on("edit",t[34]),e.$on("clear",t[25]),{c(){D(e.$$.fragment),i=W(),s=V("img"),J(s.src,r=t[0])||d(s,"src",r),d(s,"alt",""),d(s,"class","svelte-p3y7hu"),U(s,"scale-x-[-1]",t[6]==="webcam"&&t[10]),U(s,"selectable",t[12])},m(n,o){A(e,n,o),T(n,i,o),T(n,s,o),a=!0,l||(u=Y(s,"click",t[30]),l=!0)},p(n,o){(!a||o[0]&1&&!J(s.src,r=n[0]))&&d(s,"src",r),(!a||o[0]&1088)&&U(s,"scale-x-[-1]",n[6]==="webcam"&&n[10]),(!a||o[0]&4096)&&U(s,"selectable",n[12])},i(n){a||(k(e.$$.fragment,n),a=!0)},o(n){p(e.$$.fragment,n),a=!1},d(n){n&&(B(i),B(s)),E(e,n),l=!1,u()}}}function Xi(t){let e,i,s,r,a={image:t[0]};return e=new Ht({props:a}),t[32](e),e.$on("crop",t[26]),s=new Ye({}),s.$on("clear",t[33]),{c(){D(e.$$.fragment),i=W(),D(s.$$.fragment)},m(l,u){A(e,l,u),T(l,i,u),A(s,l,u),r=!0},p(l,u){const n={};u[0]&1&&(n.image=l[0]),e.$set(n)},i(l){r||(k(e.$$.fragment,l),k(s.$$.fragment,l),r=!0)},o(l){p(e.$$.fragment,l),p(s.$$.fragment,l),r=!1},d(l){l&&B(i),t[32](null),E(e,l),E(s,l)}}}function Oi(t){let e;const i=t[31].default,s=Xt(i,t,t[62],null);return{c(){s&&s.c()},m(r,a){s&&s.m(r,a),e=!0},p(r,a){s&&s.p&&(!e||a[2]&1)&&Ot(s,i,r,r[62],e?yt(i,r[62],a,null):Yt(r[62]),null)},i(r){e||(k(s,r),e=!0)},o(r){p(s,r),e=!1},d(r){s&&s.d(r)}}}function pt(t){let e,i,s,r;return{c(){e=V("img"),d(e,"class","absolute-img svelte-p3y7hu"),J(e.src,i=t[23]||t[0]?.image||t[0])||d(e,"src",i),d(e,"alt",""),U(e,"webcam",t[6]==="webcam"&&t[10])},m(a,l){T(a,e,l),t[35](e),s||(r=Y(e,"load",t[27]),s=!0)},p(a,l){l[0]&8388609&&!J(e.src,i=a[23]||a[0]?.image||a[0])&&d(e,"src",i),l[0]&1088&&U(e,"webcam",a[6]==="webcam"&&a[10])},d(a){a&&B(e),t[35](null),s=!1,r()}}}function Ct(t){let e,i,s,r,a,l,u,n;function o(f){t[37](f)}function _(f){t[38](f)}let m={value:t[0],mask_opacity:t[11],mode:t[19],width:t[17]||t[22],height:t[16]||t[21],container_height:t[18]||t[21],value_img:t[20],source:t[6],shape:t[7]};t[2]!==void 0&&(m.brush_radius=t[2]),t[3]!==void 0&&(m.brush_color=t[3]),e=new Qe({props:m}),t[36](e),H.push(()=>K(e,"brush_radius",o)),H.push(()=>K(e,"brush_color",_)),e.$on("change",t[26]),a=new $e({props:{show_eraser:t[20]}}),a.$on("undo",t[39]),a.$on("clear_mask",t[29]),a.$on("remove_image",t[28]);let h=(t[1]==="color-sketch"||t[1]==="sketch")&&Mt(t);return{c(){D(e.$$.fragment),r=W(),D(a.$$.fragment),l=W(),h&&h.c(),u=de()},m(f,b){A(e,f,b),T(f,r,b),A(a,f,b),T(f,l,b),h&&h.m(f,b),T(f,u,b),n=!0},p(f,b){const v={};b[0]&1&&(v.value=f[0]),b[0]&2048&&(v.mask_opacity=f[11]),b[0]&524288&&(v.mode=f[19]),b[0]&4325376&&(v.width=f[17]||f[22]),b[0]&2162688&&(v.height=f[16]||f[21]),b[0]&2359296&&(v.container_height=f[18]||f[21]),b[0]&1048576&&(v.value_img=f[20]),b[0]&64&&(v.source=f[6]),b[0]&128&&(v.shape=f[7]),!i&&b[0]&4&&(i=!0,v.brush_radius=f[2],Q(()=>i=!1)),!s&&b[0]&8&&(s=!0,v.brush_color=f[3],Q(()=>s=!1)),e.$set(v);const R={};b[0]&1048576&&(R.show_eraser=f[20]),a.$set(R),f[1]==="color-sketch"||f[1]==="sketch"?h?(h.p(f,b),b[0]&2&&k(h,1)):(h=Mt(f),h.c(),k(h,1),h.m(u.parentNode,u)):h&&(ee(),p(h,1,1,()=>{h=null}),te())},i(f){n||(k(e.$$.fragment,f),k(a.$$.fragment,f),k(h),n=!0)},o(f){p(e.$$.fragment,f),p(a.$$.fragment,f),p(h),n=!1},d(f){f&&(B(r),B(l),B(u)),t[36](null),E(e,f),E(a,f),h&&h.d(f)}}}function Mt(t){let e,i,s,r;function a(n){t[40](n)}function l(n){t[41](n)}let u={container_height:t[18]||t[21],img_width:t[17]||t[22],img_height:t[16]||t[21],mode:t[19]};return t[2]!==void 0&&(u.brush_radius=t[2]),t[3]!==void 0&&(u.brush_color=t[3]),e=new xe({props:u}),H.push(()=>K(e,"brush_radius",a)),H.push(()=>K(e,"brush_color",l)),{c(){D(e.$$.fragment)},m(n,o){A(e,n,o),r=!0},p(n,o){const _={};o[0]&2359296&&(_.container_height=n[18]||n[21]),o[0]&4325376&&(_.img_width=n[17]||n[22]),o[0]&2162688&&(_.img_height=n[16]||n[21]),o[0]&524288&&(_.mode=n[19]),!i&&o[0]&4&&(i=!0,_.brush_radius=n[2],Q(()=>i=!1)),!s&&o[0]&8&&(s=!0,_.brush_color=n[3],Q(()=>s=!1)),e.$set(_)},i(n){r||(k(e.$$.fragment,n),r=!0)},o(n){p(e.$$.fragment,n),r=!1},d(n){E(e,n)}}}function Yi(t){let e,i,s,r;const a=[Oi,Xi,Pi,Wi,Ni],l=[];function u(n,o){return n[0]===null&&!n[23]||n[8]?0:n[1]==="select"?1:n[1]==="editor"?2:(n[1]==="sketch"||n[1]==="color-sketch")&&(n[0]!==null||n[23])?3:4}return e=u(t),i=l[e]=a[e](t),{c(){i.c(),s=de()},m(n,o){l[e].m(n,o),T(n,s,o),r=!0},p(n,o){let _=e;e=u(n),e===_?l[e].p(n,o):(ee(),p(l[_],1,1,()=>{l[_]=null}),te(),i=l[e],i?i.p(n,o):(i=l[e]=a[e](n),i.c()),k(i,1),i.m(s.parentNode,s))},i(n){r||(k(i),r=!0)},o(n){p(i),r=!1},d(n){n&&B(s),l[e].d(n)}}}function yi(t){let e,i,s,r,a,l,u;e=new jt({props:{show_label:t[5],Icon:t[6]==="canvas"?lt:Oe,label:t[4]||(t[6]==="canvas"?"Sketch":"Image")}});const n=[Fi,Ui,Hi,qi,ji,Li,Ri],o=[];function _(m,h){return m[6]==="upload"?0:m[6]==="canvas"?1:m[0]===null&&!m[23]||m[8]?2:m[1]==="select"?3:m[1]==="editor"?4:(m[1]==="sketch"||m[1]==="color-sketch")&&(m[0]!==null||m[23])?5:6}return r=_(t),a=o[r]=n[r](t),{c(){D(e.$$.fragment),i=W(),s=V("div"),a.c(),d(s,"data-testid","image"),d(s,"class","image-container svelte-p3y7hu"),Ke(()=>t[61].call(s))},m(m,h){A(e,m,h),T(m,i,h),T(m,s,h),o[r].m(s,null),l=At(s,t[61].bind(s)),u=!0},p(m,h){const f={};h[0]&32&&(f.show_label=m[5]),h[0]&64&&(f.Icon=m[6]==="canvas"?lt:Oe),h[0]&80&&(f.label=m[4]||(m[6]==="canvas"?"Sketch":"Image")),e.$set(f);let b=r;r=_(m),r===b?o[r].p(m,h):(ee(),p(o[b],1,1,()=>{o[b]=null}),te(),a=o[r],a?a.p(m,h):(a=o[r]=n[r](m),a.c()),k(a,1),a.m(s,null))},i(m){u||(k(e.$$.fragment,m),k(a),u=!0)},o(m){p(e.$$.fragment,m),p(a),u=!1},d(m){m&&(B(i),B(s)),E(e,m),o[r].d(),l()}}}function Vi(t,e,i){let{$$slots:s={},$$scope:r}=e,{value:a}=e,{label:l=void 0}=e,{show_label:u}=e,{source:n="upload"}=e,{tool:o="editor"}=e,{shape:_}=e,{streaming:m=!1}=e,{pending:h=!1}=e,{mirror_webcam:f}=e,{brush_radius:b}=e,{brush_color:v="#000000"}=e,{mask_opacity:R}=e,{selectable:$=!1}=e,N,P;a&&(n==="upload"||n==="webcam")&&o==="sketch"&&(a={image:a,mask:null});function _e({detail:c}){o==="color-sketch"?i(23,ae=c):i(0,a=(n==="upload"||n==="webcam")&&o==="sketch"?{image:c,mask:null}:c),M("upload",c)}function L({detail:c}){i(0,a=null),i(23,ae=void 0),M("clear")}async function z({detail:c},X){le==="mask"?n==="webcam"&&X?i(0,a={image:c,mask:null}):i(0,a={image:typeof a=="string"?a:a?.image||null,mask:c}):(n==="upload"||n==="webcam")&&o==="sketch"?i(0,a={image:c,mask:null}):i(0,a=c),await Ie(),M(m?"stream":"edit")}const M=we();let F=!1;function se(c){const X=c.currentTarget;i(17,O=X.naturalWidth),i(16,me=X.naturalHeight),i(18,ne=X.getBoundingClientRect().height)}async function fe(){N.clear(),await Ie(),i(0,a=null),i(23,ae=void 0)}async function ce(){N.clear_mask(),await Ie()}let me=0,O=0,ne=0,le,x,he,ge,ae;Et(async()=>{o==="color-sketch"&&a&&typeof a=="string"&&(i(23,ae=a),await Ie(),se({currentTarget:x}))});function I(c){let X=qt(c);X&&M("select",{index:X,value:null})}function Se(c){H[c?"unshift":"push"](()=>{P=c,i(13,P),i(0,a)})}const ke=c=>(L(c),i(1,o="editor")),De=()=>i(1,o="select");function pe(c){H[c?"unshift":"push"](()=>{x=c,i(20,x)})}function Ae(c){H[c?"unshift":"push"](()=>{N=c,i(15,N)})}function Ce(c){b=c,i(2,b)}function Me(c){v=c,i(3,v)}const ze=()=>N.undo();function w(c){b=c,i(2,b)}function Re(c){v=c,i(3,v)}function Te(c){F=c,i(14,F)}const Le=()=>N.undo();function je(c){b=c,i(2,b)}function qe(c){v=c,i(3,v)}function He(c){b=c,i(2,b)}function Ue(c){v=c,i(3,v)}function be(c){H[c?"unshift":"push"](()=>{N=c,i(15,N)})}const ve=c=>o==="color-sketch"?_e(c):z(c,!0);function Fe(c){q.call(this,t,c)}function Ee(c){H[c?"unshift":"push"](()=>{P=c,i(13,P),i(0,a)})}const ye=c=>(L(c),i(1,o="editor")),Ne=()=>i(1,o="select");function Ve(c){H[c?"unshift":"push"](()=>{x=c,i(20,x)})}function Ze(c){H[c?"unshift":"push"](()=>{N=c,i(15,N)})}function Ge(c){b=c,i(2,b)}function Je(c){v=c,i(3,v)}const g=()=>N.undo();function S(c){b=c,i(2,b)}function j(c){v=c,i(3,v)}function Z(){he=this.offsetHeight,ge=this.offsetWidth,i(21,he),i(22,ge)}return t.$$set=c=>{"value"in c&&i(0,a=c.value),"label"in c&&i(4,l=c.label),"show_label"in c&&i(5,u=c.show_label),"source"in c&&i(6,n=c.source),"tool"in c&&i(1,o=c.tool),"shape"in c&&i(7,_=c.shape),"streaming"in c&&i(8,m=c.streaming),"pending"in c&&i(9,h=c.pending),"mirror_webcam"in c&&i(10,f=c.mirror_webcam),"brush_radius"in c&&i(2,b=c.brush_radius),"brush_color"in c&&i(3,v=c.brush_color),"mask_opacity"in c&&i(11,R=c.mask_opacity),"selectable"in c&&i(12,$=c.selectable),"$$scope"in c&&i(62,r=c.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16384&&M("drag",F),t.$$.dirty[0]&66&&(n==="canvas"&&o==="sketch"?i(19,le="bw-sketch"):o==="color-sketch"?i(19,le="color-sketch"):(n==="upload"||n==="webcam")&&o==="sketch"?i(19,le="mask"):i(19,le="editor")),t.$$.dirty[0]&1&&(a===null||a.image===null&&a.mask===null)&&i(23,ae=void 0),t.$$.dirty[0]&8193&&P&&(a?(i(13,P.image=a,P),P.create()):P.destroy())},[a,o,b,v,l,u,n,_,m,h,f,R,$,P,F,N,me,O,ne,le,x,he,ge,ae,_e,L,z,se,fe,ce,I,s,Se,ke,De,pe,Ae,Ce,Me,ze,w,Re,Te,Le,je,qe,He,Ue,be,ve,Fe,Ee,ye,Ne,Ve,Ze,Ge,Je,g,S,j,Z,r]}let Zi=class extends ue{constructor(e){super(),oe(this,e,Vi,yi,ie,{value:0,label:4,show_label:5,source:6,tool:1,shape:7,streaming:8,pending:9,mirror_webcam:10,brush_radius:2,brush_color:3,mask_opacity:11,selectable:12},null,[-1,-1,-1])}};function Gi(t){let e,i;return e=new ii({props:{type:"image"}}),{c(){D(e.$$.fragment)},m(s,r){A(e,s,r),i=!0},p:y,i(s){i||(k(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){E(e,s)}}}function Ji(t){let e,i,s,r,a;const l=[t[1]];let u={};for(let _=0;_<l.length;_+=1)u=Tt(u,l[_]);e=new Bt({props:u});function n(_){t[24](_)}let o={brush_radius:t[15],brush_color:t[16],shape:t[14],source:t[5],tool:t[6],selectable:t[18],mask_opacity:t[17],label:t[7],show_label:t[8],pending:t[10],streaming:t[9],mirror_webcam:t[13],$$slots:{default:[Gi]},$$scope:{ctx:t}};return t[0]!==void 0&&(o.value=t[0]),s=new Zi({props:o}),H.push(()=>K(s,"value",n)),s.$on("edit",t[25]),s.$on("clear",t[26]),s.$on("stream",t[27]),s.$on("drag",t[28]),s.$on("upload",t[29]),s.$on("select",t[30]),s.$on("share",t[31]),s.$on("error",t[32]),{c(){D(e.$$.fragment),i=W(),D(s.$$.fragment)},m(_,m){A(e,_,m),T(_,i,m),A(s,_,m),a=!0},p(_,m){const h=m[0]&2?St(l,[Dt(_[1])]):{};e.$set(h);const f={};m[0]&32768&&(f.brush_radius=_[15]),m[0]&65536&&(f.brush_color=_[16]),m[0]&16384&&(f.shape=_[14]),m[0]&32&&(f.source=_[5]),m[0]&64&&(f.tool=_[6]),m[0]&262144&&(f.selectable=_[18]),m[0]&131072&&(f.mask_opacity=_[17]),m[0]&128&&(f.label=_[7]),m[0]&256&&(f.show_label=_[8]),m[0]&1024&&(f.pending=_[10]),m[0]&512&&(f.streaming=_[9]),m[0]&8192&&(f.mirror_webcam=_[13]),m[1]&4&&(f.$$scope={dirty:m,ctx:_}),!r&&m[0]&1&&(r=!0,f.value=_[0],Q(()=>r=!1)),s.$set(f)},i(_){a||(k(e.$$.fragment,_),k(s.$$.fragment,_),a=!0)},o(_){p(e.$$.fragment,_),p(s.$$.fragment,_),a=!1},d(_){_&&B(i),E(e,_),E(s,_)}}}function Ki(t){let e,i;return e=new Lt({props:{visible:t[4],variant:t[0]===null&&t[5]==="upload"?"dashed":"solid",border_mode:t[22]?"focus":"base",padding:!1,elem_id:t[2],elem_classes:t[3],height:t[11]||(t[5]==="webcam"?void 0:zt),width:t[12],allow_overflow:!1,container:t[19],scale:t[20],min_width:t[21],$$slots:{default:[Ji]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(s,r){A(e,s,r),i=!0},p(s,r){const a={};r[0]&16&&(a.visible=s[4]),r[0]&33&&(a.variant=s[0]===null&&s[5]==="upload"?"dashed":"solid"),r[0]&4194304&&(a.border_mode=s[22]?"focus":"base"),r[0]&4&&(a.elem_id=s[2]),r[0]&8&&(a.elem_classes=s[3]),r[0]&2080&&(a.height=s[11]||(s[5]==="webcam"?void 0:zt)),r[0]&4096&&(a.width=s[12]),r[0]&524288&&(a.container=s[19]),r[0]&1048576&&(a.scale=s[20]),r[0]&2097152&&(a.min_width=s[21]),r[0]&4712419|r[1]&4&&(a.$$scope={dirty:r,ctx:s}),e.$set(a)},i(s){i||(k(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){E(e,s)}}}const zt=240;function Qi(t,e,i){let{elem_id:s=""}=e,{elem_classes:r=[]}=e,{visible:a=!0}=e,{value:l=null}=e,{source:u="upload"}=e,{tool:n="editor"}=e,{label:o}=e,{show_label:_}=e,{streaming:m}=e,{pending:h}=e,{height:f}=e,{width:b}=e,{mirror_webcam:v}=e,{shape:R}=e,{brush_radius:$}=e,{brush_color:N}=e,{mask_opacity:P}=e,{selectable:_e=!1}=e,{container:L=!0}=e,{scale:z=null}=e,{min_width:M=void 0}=e,{loading_status:F}=e;const se=we();let fe;function ce(I){l=I,i(0,l)}function me(I){q.call(this,t,I)}function O(I){q.call(this,t,I)}function ne(I){q.call(this,t,I)}const le=({detail:I})=>i(22,fe=I);function x(I){q.call(this,t,I)}function he(I){q.call(this,t,I)}function ge(I){q.call(this,t,I)}const ae=({detail:I})=>{i(1,F=F||{}),i(1,F.status="error",F),se("error",I)};return t.$$set=I=>{"elem_id"in I&&i(2,s=I.elem_id),"elem_classes"in I&&i(3,r=I.elem_classes),"visible"in I&&i(4,a=I.visible),"value"in I&&i(0,l=I.value),"source"in I&&i(5,u=I.source),"tool"in I&&i(6,n=I.tool),"label"in I&&i(7,o=I.label),"show_label"in I&&i(8,_=I.show_label),"streaming"in I&&i(9,m=I.streaming),"pending"in I&&i(10,h=I.pending),"height"in I&&i(11,f=I.height),"width"in I&&i(12,b=I.width),"mirror_webcam"in I&&i(13,v=I.mirror_webcam),"shape"in I&&i(14,R=I.shape),"brush_radius"in I&&i(15,$=I.brush_radius),"brush_color"in I&&i(16,N=I.brush_color),"mask_opacity"in I&&i(17,P=I.mask_opacity),"selectable"in I&&i(18,_e=I.selectable),"container"in I&&i(19,L=I.container),"scale"in I&&i(20,z=I.scale),"min_width"in I&&i(21,M=I.min_width),"loading_status"in I&&i(1,F=I.loading_status)},t.$$.update=()=>{t.$$.dirty[0]&1&&i(0,l=l||null),t.$$.dirty[0]&1&&se("change")},[l,F,s,r,a,u,n,o,_,m,h,f,b,v,R,$,N,P,_e,L,z,M,fe,se,ce,me,O,ne,le,x,he,ge,ae]}class $i extends ue{constructor(e){super(),oe(this,e,Qi,Ki,ie,{elem_id:2,elem_classes:3,visible:4,value:0,source:5,tool:6,label:7,show_label:8,streaming:9,pending:10,height:11,width:12,mirror_webcam:13,shape:14,brush_radius:15,brush_color:16,mask_opacity:17,selectable:18,container:19,scale:20,min_width:21,loading_status:1},null,[-1,-1])}get elem_id(){return this.$$.ctx[2]}set elem_id(e){this.$$set({elem_id:e}),C()}get elem_classes(){return this.$$.ctx[3]}set elem_classes(e){this.$$set({elem_classes:e}),C()}get visible(){return this.$$.ctx[4]}set visible(e){this.$$set({visible:e}),C()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),C()}get source(){return this.$$.ctx[5]}set source(e){this.$$set({source:e}),C()}get tool(){return this.$$.ctx[6]}set tool(e){this.$$set({tool:e}),C()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),C()}get show_label(){return this.$$.ctx[8]}set show_label(e){this.$$set({show_label:e}),C()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),C()}get pending(){return this.$$.ctx[10]}set pending(e){this.$$set({pending:e}),C()}get height(){return this.$$.ctx[11]}set height(e){this.$$set({height:e}),C()}get width(){return this.$$.ctx[12]}set width(e){this.$$set({width:e}),C()}get mirror_webcam(){return this.$$.ctx[13]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),C()}get shape(){return this.$$.ctx[14]}set shape(e){this.$$set({shape:e}),C()}get brush_radius(){return this.$$.ctx[15]}set brush_radius(e){this.$$set({brush_radius:e}),C()}get brush_color(){return this.$$.ctx[16]}set brush_color(e){this.$$set({brush_color:e}),C()}get mask_opacity(){return this.$$.ctx[17]}set mask_opacity(e){this.$$set({mask_opacity:e}),C()}get selectable(){return this.$$.ctx[18]}set selectable(e){this.$$set({selectable:e}),C()}get container(){return this.$$.ctx[19]}set container(e){this.$$set({container:e}),C()}get scale(){return this.$$.ctx[20]}set scale(e){this.$$set({scale:e}),C()}get min_width(){return this.$$.ctx[21]}set min_width(e){this.$$set({min_width:e}),C()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),C()}}function xi(t){let e,i,s;function r(l){t[33](l)}let a={elem_id:t[1],elem_classes:t[2],visible:t[3],source:t[4],tool:t[5],label:t[6],show_label:t[7],streaming:t[9],pending:t[10],height:t[11],width:t[12],mirror_webcam:t[13],shape:t[14],brush_radius:t[15],brush_color:t[16],mask_opacity:t[17],selectable:t[18],container:t[19],scale:t[20],min_width:t[21],loading_status:t[22]};return t[0]!==void 0&&(a.value=t[0]),e=new $i({props:a}),H.push(()=>K(e,"value",r)),e.$on("edit",t[34]),e.$on("clear",t[35]),e.$on("stream",t[36]),e.$on("upload",t[37]),e.$on("select",t[38]),e.$on("share",t[39]),e.$on("error",t[40]),{c(){D(e.$$.fragment)},m(l,u){A(e,l,u),s=!0},p(l,u){const n={};u[0]&2&&(n.elem_id=l[1]),u[0]&4&&(n.elem_classes=l[2]),u[0]&8&&(n.visible=l[3]),u[0]&16&&(n.source=l[4]),u[0]&32&&(n.tool=l[5]),u[0]&64&&(n.label=l[6]),u[0]&128&&(n.show_label=l[7]),u[0]&512&&(n.streaming=l[9]),u[0]&1024&&(n.pending=l[10]),u[0]&2048&&(n.height=l[11]),u[0]&4096&&(n.width=l[12]),u[0]&8192&&(n.mirror_webcam=l[13]),u[0]&16384&&(n.shape=l[14]),u[0]&32768&&(n.brush_radius=l[15]),u[0]&65536&&(n.brush_color=l[16]),u[0]&131072&&(n.mask_opacity=l[17]),u[0]&262144&&(n.selectable=l[18]),u[0]&524288&&(n.container=l[19]),u[0]&1048576&&(n.scale=l[20]),u[0]&2097152&&(n.min_width=l[21]),u[0]&4194304&&(n.loading_status=l[22]),!i&&u[0]&1&&(i=!0,n.value=l[0],Q(()=>i=!1)),e.$set(n)},i(l){s||(k(e.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),s=!1},d(l){E(e,l)}}}function es(t){let e,i,s;function r(l){t[25](l)}let a={elem_id:t[1],elem_classes:t[2],visible:t[3],label:t[6],show_label:t[7],show_download_button:t[8],height:t[11],width:t[12],selectable:t[18],container:t[19],scale:t[20],min_width:t[21],loading_status:t[22],show_share_button:t[24]};return t[0]!==void 0&&(a.value=t[0]),e=new ki({props:a}),H.push(()=>K(e,"value",r)),e.$on("edit",t[26]),e.$on("clear",t[27]),e.$on("stream",t[28]),e.$on("upload",t[29]),e.$on("select",t[30]),e.$on("share",t[31]),e.$on("error",t[32]),{c(){D(e.$$.fragment)},m(l,u){A(e,l,u),s=!0},p(l,u){const n={};u[0]&2&&(n.elem_id=l[1]),u[0]&4&&(n.elem_classes=l[2]),u[0]&8&&(n.visible=l[3]),u[0]&64&&(n.label=l[6]),u[0]&128&&(n.show_label=l[7]),u[0]&256&&(n.show_download_button=l[8]),u[0]&2048&&(n.height=l[11]),u[0]&4096&&(n.width=l[12]),u[0]&262144&&(n.selectable=l[18]),u[0]&524288&&(n.container=l[19]),u[0]&1048576&&(n.scale=l[20]),u[0]&2097152&&(n.min_width=l[21]),u[0]&4194304&&(n.loading_status=l[22]),u[0]&16777216&&(n.show_share_button=l[24]),!i&&u[0]&1&&(i=!0,n.value=l[0],Q(()=>i=!1)),e.$set(n)},i(l){s||(k(e.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),s=!1},d(l){E(e,l)}}}function ts(t){let e,i,s,r;const a=[es,xi],l=[];function u(n,o){return n[23]==="static"?0:1}return e=u(t),i=l[e]=a[e](t),{c(){i.c(),s=de()},m(n,o){l[e].m(n,o),T(n,s,o),r=!0},p(n,o){let _=e;e=u(n),e===_?l[e].p(n,o):(ee(),p(l[_],1,1,()=>{l[_]=null}),te(),i=l[e],i?i.p(n,o):(i=l[e]=a[e](n),i.c()),k(i,1),i.m(s.parentNode,s))},i(n){r||(k(i),r=!0)},o(n){p(i),r=!1},d(n){n&&B(s),l[e].d(n)}}}function is(t,e,i){let{elem_id:s=""}=e,{elem_classes:r=[]}=e,{visible:a=!0}=e,{value:l=null}=e,{source:u="upload"}=e,{tool:n="editor"}=e,{label:o}=e,{show_label:_}=e,{show_download_button:m}=e,{streaming:h}=e,{pending:f}=e,{height:b}=e,{width:v}=e,{mirror_webcam:R}=e,{shape:$}=e,{brush_radius:N}=e,{brush_color:P}=e,{mask_opacity:_e}=e,{selectable:L=!1}=e,{container:z=!0}=e,{scale:M=null}=e,{min_width:F=void 0}=e,{loading_status:se}=e,{mode:fe}=e,{show_share_button:ce=!1}=e;const me=we();function O(w){l=w,i(0,l)}function ne(w){q.call(this,t,w)}function le(w){q.call(this,t,w)}function x(w){q.call(this,t,w)}function he(w){q.call(this,t,w)}function ge(w){q.call(this,t,w)}function ae(w){q.call(this,t,w)}function I(w){q.call(this,t,w)}function Se(w){l=w,i(0,l)}function ke(w){q.call(this,t,w)}function De(w){q.call(this,t,w)}function pe(w){q.call(this,t,w)}function Ae(w){q.call(this,t,w)}function Ce(w){q.call(this,t,w)}function Me(w){q.call(this,t,w)}function ze(w){q.call(this,t,w)}return t.$$set=w=>{"elem_id"in w&&i(1,s=w.elem_id),"elem_classes"in w&&i(2,r=w.elem_classes),"visible"in w&&i(3,a=w.visible),"value"in w&&i(0,l=w.value),"source"in w&&i(4,u=w.source),"tool"in w&&i(5,n=w.tool),"label"in w&&i(6,o=w.label),"show_label"in w&&i(7,_=w.show_label),"show_download_button"in w&&i(8,m=w.show_download_button),"streaming"in w&&i(9,h=w.streaming),"pending"in w&&i(10,f=w.pending),"height"in w&&i(11,b=w.height),"width"in w&&i(12,v=w.width),"mirror_webcam"in w&&i(13,R=w.mirror_webcam),"shape"in w&&i(14,$=w.shape),"brush_radius"in w&&i(15,N=w.brush_radius),"brush_color"in w&&i(16,P=w.brush_color),"mask_opacity"in w&&i(17,_e=w.mask_opacity),"selectable"in w&&i(18,L=w.selectable),"container"in w&&i(19,z=w.container),"scale"in w&&i(20,M=w.scale),"min_width"in w&&i(21,F=w.min_width),"loading_status"in w&&i(22,se=w.loading_status),"mode"in w&&i(23,fe=w.mode),"show_share_button"in w&&i(24,ce=w.show_share_button)},t.$$.update=()=>{t.$$.dirty[0]&1&&i(0,l=l||null),t.$$.dirty[0]&1&&me("change")},[l,s,r,a,u,n,o,_,m,h,f,b,v,R,$,N,P,_e,L,z,M,F,se,fe,ce,O,ne,le,x,he,ge,ae,I,Se,ke,De,pe,Ae,Ce,Me,ze]}class ss extends ue{constructor(e){super(),oe(this,e,is,ts,ie,{elem_id:1,elem_classes:2,visible:3,value:0,source:4,tool:5,label:6,show_label:7,show_download_button:8,streaming:9,pending:10,height:11,width:12,mirror_webcam:13,shape:14,brush_radius:15,brush_color:16,mask_opacity:17,selectable:18,container:19,scale:20,min_width:21,loading_status:22,mode:23,show_share_button:24},null,[-1,-1])}get elem_id(){return this.$$.ctx[1]}set elem_id(e){this.$$set({elem_id:e}),C()}get elem_classes(){return this.$$.ctx[2]}set elem_classes(e){this.$$set({elem_classes:e}),C()}get visible(){return this.$$.ctx[3]}set visible(e){this.$$set({visible:e}),C()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),C()}get source(){return this.$$.ctx[4]}set source(e){this.$$set({source:e}),C()}get tool(){return this.$$.ctx[5]}set tool(e){this.$$set({tool:e}),C()}get label(){return this.$$.ctx[6]}set label(e){this.$$set({label:e}),C()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),C()}get show_download_button(){return this.$$.ctx[8]}set show_download_button(e){this.$$set({show_download_button:e}),C()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),C()}get pending(){return this.$$.ctx[10]}set pending(e){this.$$set({pending:e}),C()}get height(){return this.$$.ctx[11]}set height(e){this.$$set({height:e}),C()}get width(){return this.$$.ctx[12]}set width(e){this.$$set({width:e}),C()}get mirror_webcam(){return this.$$.ctx[13]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),C()}get shape(){return this.$$.ctx[14]}set shape(e){this.$$set({shape:e}),C()}get brush_radius(){return this.$$.ctx[15]}set brush_radius(e){this.$$set({brush_radius:e}),C()}get brush_color(){return this.$$.ctx[16]}set brush_color(e){this.$$set({brush_color:e}),C()}get mask_opacity(){return this.$$.ctx[17]}set mask_opacity(e){this.$$set({mask_opacity:e}),C()}get selectable(){return this.$$.ctx[18]}set selectable(e){this.$$set({selectable:e}),C()}get container(){return this.$$.ctx[19]}set container(e){this.$$set({container:e}),C()}get scale(){return this.$$.ctx[20]}set scale(e){this.$$set({scale:e}),C()}get min_width(){return this.$$.ctx[21]}set min_width(e){this.$$set({min_width:e}),C()}get loading_status(){return this.$$.ctx[22]}set loading_status(e){this.$$set({loading_status:e}),C()}get mode(){return this.$$.ctx[23]}set mode(e){this.$$set({mode:e}),C()}get show_share_button(){return this.$$.ctx[24]}set show_share_button(e){this.$$set({show_share_button:e}),C()}}const ks=ss,vs=["static","dynamic"];export{ks as Component,Cs as ExampleComponent,vs as modes};
//# sourceMappingURL=index-c038c4da.js.map
