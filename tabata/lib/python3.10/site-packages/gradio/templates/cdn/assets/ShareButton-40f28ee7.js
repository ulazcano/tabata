import{S as h,e as m,s as d,f as p,g as c,h as w,j as _,n as u,k as y,F as b,G as S,w as v,u as x,H as A,C}from"./index-9e76ffee.js";import{I as B}from"./IconButton-307018b3.js";function M(o){let e,n;return{c(){e=p("svg"),n=p("path"),c(n,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),c(n,"fill","currentColor"),c(e,"id","icon"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 32 32")},m(t,a){w(t,e,a),_(e,n)},p:u,i:u,o:u,d(t){t&&y(e)}}}class k extends h{constructor(e){super(),m(this,e,null,M,d,{})}}class l extends Error{constructor(e){super(e),this.name="ShareError"}}async function j(o,e){if(window.__gradio_space__==null)throw new l("Must be on Spaces to share.");let n,t,a;if(e==="url"){const r=await fetch(o);n=await r.blob(),t=r.headers.get("content-type")||"",a=r.headers.get("content-disposition")||""}else n=E(o),t=o.split(";")[0].split(":")[1],a="file"+t.split("/")[1];const s=new File([n],a,{type:t}),i=await fetch("https://huggingface.co/uploads",{method:"POST",body:s,headers:{"Content-Type":s.type,"X-Requested-With":"XMLHttpRequest"}});if(!i.ok){if(i.headers.get("content-type")?.includes("application/json")){const r=await i.json();throw new l(`Upload failed: ${r.error}`)}throw new l("Upload failed.")}return await i.text()}function E(o){for(var e=o.split(","),n=e[0].match(/:(.*?);/)[1],t=atob(e[1]),a=t.length,s=new Uint8Array(a);a--;)s[a]=t.charCodeAt(a);return new Blob([s],{type:n})}function R(o){let e,n;return e=new B({props:{Icon:k,label:"Share",pending:o[2]}}),e.$on("click",o[4]),{c(){b(e.$$.fragment)},m(t,a){S(e,t,a),n=!0},p(t,[a]){const s={};a&4&&(s.pending=t[2]),e.$set(s)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function T(o,e,n){const t=C();let{formatter:a}=e,{value:s}=e,i=!1;const f=async()=>{try{n(2,i=!0);const r=await a(s);t("share",{description:r})}catch(r){console.error(r);let g=r instanceof l?r.message:"Share failed.";t("error",g)}finally{n(2,i=!1)}};return o.$$set=r=>{"formatter"in r&&n(0,a=r.formatter),"value"in r&&n(1,s=r.value)},[a,s,i,t,f]}class q extends h{constructor(e){super(),m(this,e,T,R,d,{formatter:0,value:1})}}export{q as S,j as u};
//# sourceMappingURL=ShareButton-40f28ee7.js.map
